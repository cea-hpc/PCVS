#!/bin/sh

MPC_AUTO_KILL_TIMEOUT=150

#Make sure we run in a temporary directory for parallel tests
MPCRUN_ARGS+=" --tempdir"

MPC_PROC_NB_LIST="1"
MPC_TASK_NB_LIST="4"

#generate compile command. for standard build
common_insert_test "compile_BTIO_simple_test" "0" "cp -rf ${MPC_TEST_CURRENT_SOURCE_DIR}/* ${PCVS_CWORK_DIR}; cd ${PCVS_CWORK_DIR}; make bt NPROCS=4 CLASS=A SUBTYPE=simple"
common_insert_test "compile_BTIO_full_test" "0" "cp -rf ${MPC_TEST_CURRENT_SOURCE_DIR}/* ${PCVS_CWORK_DIR}; cd ${PCVS_CWORK_DIR}; make bt NPROCS=4 CLASS=A SUBTYPE=full"

#This one is longer
MPC_AUTO_KILL_TIMEOUT=700

helper_configuration_loop "test_BTIO_full_test" "${PCVS_CWORK_DIR}/bin/bt.A.4.mpi_io_full" "compile_BTIO_full_test"


helper_configuration_loop "test_BTIO_simple_test" "${PCVS_CWORK_DIR}/bin/bt.A.4.mpi_io_simple" "compile_BTIO_simple_test"
