#!/bin/sh

REQUIRE_OPENMP=true

if [ -z "$OMP_NUM_THREADS" ] || [ $OMP_NUM_THREADS -eq 1 ] ;then
  MPC_OPENMP_THREAD_LIST=$CLUSTER_MAX_CORES_PER_NODE
else
  MPC_OPENMP_THREAD_LIST=$OMP_NUM_THREADS
fi

#add openmp cflags
CFLAGS="${CFLAGS} -I${PCVS_CSOURCE_DIR} -fopenmp ${PRIVATIZATION}"

openmp_configuration "" "
do_collapse.f 
do_firstprivate.f 
do_lastprivate.f 
do_ordered.f 
do_private.f 
do_reduction.f 
do_schedule_dynamic.f 
do_schedule_guided.f 
do_schedule_static.f 
has_openmp.f 
omp_atomic.f 
omp_barrier.f 
omp_copyin.f 
omp_critical.f 
omp_flush.f 
omp_get_num_threads.f 
omp_get_wticks.f 
omp_in_parallel.f 
omp_lock.f 
omp_master_3.f 
omp_master.f 
omp_nested.f 
omp_nest_lock.f 
omp_num_threads.f 
omp_single.f 
omp_task.f 
omp_task_firstprivate.f 
omp_task_if.f 
omp_task_private.f 
omp_task_shared.f 
omp_task_untied.f 
omp_taskwait.f 
omp_testlock.f 
omp_test_nest_lock.f 
omp_threadprivate.f 
omp_workshare_default.f 
omp_workshare.f 
omp_wtime.f 
par_do_firstprivate.f 
par_do_if.f 
par_do_lastprivate.f 
par_do_ordered.f 
par_do_private.f 
par_do_reduction.f 
par_section_firstprivate.f 
par_section_lastprivate.f 
par_section_private.f 
par_section_reduct.f 
section_firstprivate.f 
section_lastprivate.f 
section_private.f 
section_reduction.f 
single_copyprivate.f 
single_nowait.f 
single_private.f"

