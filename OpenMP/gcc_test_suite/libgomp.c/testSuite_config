#!/bin/sh

REQUIRE_OPENMP=true

if [ -z "$OMP_NUM_THREADS" ] || [ $OMP_NUM_THREADS -eq 1 ] ;then
  MPC_OPENMP_THREAD_LIST=$CLUSTER_MAX_CORES_PER_NODE
else
  MPC_OPENMP_THREAD_LIST=$OMP_NUM_THREADS
fi

#add openmp cflags
CFLAGS="${CFLAGS} -fopenmp ${PRIVATIZATION}"

#call existing simple configuration
openmp_configuration "" "atomic-1.c atomic-10.c atomic-2.c atomic-3.c atomic-4.c atomic-5.c atomic-6.c collapse-1.c collapse-2.c collapse-3.c copyin-1.c copyin-2.c copyin-3.c critical-2.c debug-1.c icv-1.c icv-2.c lib-1.c lock-1.c lock-2.c loop-10.c loop-11.c loop-12.c loop-3.c loop-4.c loop-5.c loop-6.c loop-7.c loop-8.c loop-9.c no-oversubscribing-no-nested-nested-1.c nested-1.c nested-2.c nested-3.c nestedfn-1.c nestedfn-2.c nestedfn-3.c nestedfn-4.c nestedfn-5.c nestedfn-6.c nqueens-1.c omp-loop01.c omp-loop02.c omp-loop03.c omp-nested-1.c omp-parallel-for.c omp-parallel-if.c no-oversubscribing-omp-parallel-if.c omp-single-1.c omp-single-2.c omp-single-3.c omp_hello.c omp_matvec.c omp_orphan.c omp_reduction.c omp_workshare1.c omp_workshare2.c omp_workshare3.c omp_workshare4.c ordered-3.c pr26171.c pr26943-1.c pr26943-2.c pr26943-3.c pr26943-4.c pr29947-1.c pr29947-2.c pr30494.c pr32362-1.c pr32362-2.c pr32362-3.c pr32468.c pr33880.c pr34513.c pr35130.c pr35196.c pr35549.c pr35625.c pr36802-1.c pr36802-2.c pr36802-3.c pr38650.c pr39154.c pr39591-1.c pr39591-2.c pr39591-3.c private-1.c reduction-1.c reduction-2.c reduction-3.c reduction-4.c reduction-5.c shared-1.c no-oversubscribing-shared-1.c shared-2.c shared-3.c single-2.c sort-1.c vla-1.c"

COMMON_FILES="${MPC_TEST_CURRENT_SOURCE_DIR}/pr24455-1.c"
openmp_configuration "" "pr24455.c"
