#!/bin/sh

REQUIRE_OPENMP=true

if [ -z "$OMP_NUM_THREADS" ] || [ $OMP_NUM_THREADS -eq 1 ] ;then
  MPC_OPENMP_THREAD_LIST=$CLUSTER_MAX_CORES_PER_NODE
else
  MPC_OPENMP_THREAD_LIST=$OMP_NUM_THREADS
fi

# Catch original CFLAGS
ORIGINAL_CFLAGS=${CFLAGS}

#add openmp cflags
CFLAGS="${ORIGINAL_CFLAGS} -fopenmp ${PRIVATIZATION}"

openmp_configuration "" "depend-1.f90 depend-2.f90 depend-3.f90"
