#!/bin/sh

OLD_CFLAGS="${CFLAGS}"

# Basic operations for reduction
COMMON_FILES="${PCVS_CSOURCE_DIR}/../common/libmpitestf.F ${PCVS_CSOURCE_DIR}/../common/reduce/reduce.F"
CFLAGS="${OLD_CFLAGS} -I${PCVS_CSOURCE_DIR}/../common/ -I${PCVS_CSOURCE_DIR}/../common/reduce/"
multiple_configuration "MPI_Reduce.F MPI_Allreduce.F MPI_Reduce_scatter.F MPI_Scan.F"

# Loc operations for reduction
COMMON_FILES="${PCVS_CSOURCE_DIR}/../common/libmpitestf.F ${PCVS_CSOURCE_DIR}/../common/reduce_loc/reduce.F"
CFLAGS="${OLD_CFLAGS} -I${PCVS_CSOURCE_DIR}/../common/ -I${PCVS_CSOURCE_DIR}/../common/reduce_loc/"
multiple_configuration "MPI_Reduce_loc.F MPI_Allreduce_loc.F MPI_Reduce_scatter_loc.F MPI_Scan_loc.F"

# User operations for reduction
COMMON_FILES="${PCVS_CSOURCE_DIR}/../common/libmpitestf.F ${PCVS_CSOURCE_DIR}/../common/reduce_user/reduce.F"
CFLAGS="${OLD_CFLAGS} -I${PCVS_CSOURCE_DIR}/../common/ -I${PCVS_CSOURCE_DIR}/../common/reduce_user/"
multiple_configuration "MPI_Reduce_user.F MPI_Allreduce_user.F MPI_Reduce_scatter_user.F MPI_Scan_user.F"

# Collectives without reduction
COMMON_FILES="${PCVS_CSOURCE_DIR}/../common/libmpitestf.F"
CFLAGS="${OLD_CFLAGS} -I${PCVS_CSOURCE_DIR}/../common/"
multiple_configuration "MPI_Allgather.F MPI_Allgatherv.F MPI_Alltoall.F MPI_Alltoallv.F MPI_Barrier.F MPI_Bcast.F MPI_Gather.F MPI_Gatherv.F MPI_Scatter.F MPI_Scatterv.F MPI_collective_message.F"
